<!DOCTYPE html>

<html>

  <head>
    <!-- Encoding -->
    <meta charset="UTF-8">
    <!-- Description of Web Page -->
    <meta name="description" content="GIS Project">
    <!-- Keywords important for Google -->
    <meta name="keywords" content="Raphael Witt, Zhendong Yuan, Geoinformatics, Students">
    <!-- Author -->
    <meta name="author" content="Raphael Witt, Zhendong Yuan">
    <!-- Title -->
    <title>Unemployment Data Visualisation - GI in Society</title>

	  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.2.0/dist/leaflet.css" integrity="sha512-M2wvCLH6DSRazYeZRIm1JnYyh22purTM+FDB5CsyxtQJYeKq83arPe5wgbNmcFXGqiSH2XR8dT/fJISVA1r/zQ==" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.2.0/dist/leaflet.js" integrity="sha512-lInM/apFSqyy1o6s89K4iQUKg6ppXEgsVxT35HbzUupEVRh2Eu9Wdl4tHj7dZO0s1uvplcYGmt3498TtHq+log==" crossorigin=""></script>
    <link rel="stylesheet" href="css/bootstrap.min.css"/>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
    <!-- <script src="https://unpkg.com/terraformer@1.0.8"></script>
    <script src="https://unpkg.com/terraformer-wkt-parser@1.1.2"></script> -->


    <!-- Style -->
    <style>
    hr {
      display: block;
      margin-left: auto;
      margin-right: auto;
      border-style: solid;
      border-width: 1px;
    }
    h2 {
      text-align: center;
      margin-top: 10px;
    }
  	div#mapid {
	  height: 450px;
      border-radius: 20px;
      border-style: solid;
      border-color: gray;
      border-width: 1px;
  	}
    div#displaybox {
      border-radius: 20px;
      border-style: solid;
      border-color: gray;
      border-width: 1px;
      margin-left: 30px;
      margin-right: 10px;
    }
    div#displayfunctions {
      border-radius: 20px;
      border-style: solid;
      border-color: gray;
      border-width: 1px;
      margin-left: 10px;
      margin-right: 30px;
    }
    #parameter {
      width: 100%;
    }
    #slidervalue {
      text-align: center;
      margin-top: 5px;
    }
    .slidecontainer {
      width: 100%;
      margin-top: 50%;
    }
    .slider {
      -webkit-appearance: none;
      width: 100%;
      height: 5px;
      border-radius: 2px;
      background: #d3d3d3;
      outline: inherit;
      opacity: 1;
    }
    .container-fluid {
      margin-top: 25px;
      margin-bottom: 10px;
    }
    .centered{
      float: none;
      margin: 0 auto;
    }
    #chartContainer {
      margin-top: 20%;
      margin-bottom: 5px;
      height: 65%;
    }
    .head {
      position: absolute;
      left: 87%;
      top: 3%;
    }
    #getStateName {
      font-size: 20px;
      margin-top: 5px;
    }
    .legend {
      line-height: 18px;
      color: #555;
      background-color: white;
      border-radius: 5px;
      padding-left: 10px;
      padding-right: 10px;
      padding-bottom: 10px;
      padding-top: 5px;
    }
    .legend i {
        width: 18px;
        height: 18px;
        float: left;
        margin-right: 10px;
        opacity: 0.7;
    }
  </style>

  </head>

  <body>
    <h2>Unemployment in federal states of Germany</h2>
    <div class="head">
        <a target="_blank" href="info.html">
          <img src="img/Hilfe.jpg" class="img-responsive" width="13%"/>
              Help
        </a>
        <a target="_blank" href="contact.html">
          <img src="img/Kontakt_weiÃŸ.jpg" class="img-responsive" width="13%"/>
              Contact
        </a>
    </div>

    <hr></hr>

    <div class="container-fluid">
      <div class="row">
        <div class="col" id="displayfunctions">
          <h5>Information</h5>
          <p>Please select a parameter down below and click on the federal state you want to retrieve the additional information from.</p>
          <br>
          <h5>Parameter selection</h5>
          <form>
		  		      <select name="parameter" id="parameter" >
                  <option value="numofindustries">Number of Industries</option>
                  <option value="popdens">Population density</option>
				          <option value="gdp">GDP per Capita</option>
				          <option value="riskofpoverty">Risk of Poverty</option>
                </select>
		            <div class="slidecontainer">
		                <input type="range" min="2006" max="2016" value="2010" class="slider" id="sliderRange">
		            </div>
		            <div id="slidervalue">
		                <font size="4" id="year">2010</font>
	              </div>
          </form>
        </div>
        <div class="col-6" id="mapid"></div>
        <div class="col" id="displaybox">
          <h5 id="getStateName">Selected federal state: </h5>
          <p id="chartContainer"></p>
        </div>
      </div>
    </div>

    <script type="text/javascript" src="./js/statesJSON.js"></script>

    <script>

      var geoJsonFeatureCollection;
      var stateName;
      var gJ;
      var geojson;
      var ame = [];
      var unemp2006 = [];
      var unemp2007 = [];
      var unemp2008 = [];
      var unemp2009 = [];
      var unemp2010 = [];
      var unemp2011 = [];
      var unemp2012 = [];
      var unemp2013 = [];
      var unemp2014 = [];
      var unemp2015 = [];
      var unemp2016 = [];


      var slider = document.getElementById("sliderRange");
    	var output = document.getElementById("year");
    	output.innerHTML = slider.value;

    	slider.oninput = function() {
    	  output.innerHTML = this.value;
        //getUnemplyoment();
        if(slider.value == 2006){
          geojson.setStyle(style2006);
        } else if(slider.value == 2007){
          geojson.setStyle(style2007);
        }else if(slider.value == 2008){
          geojson.setStyle(style2008);
        } else if(slider.value == 2009){
          geojson.setStyle(style2009);
        } else if(slider.value == 2010){
          geojson.setStyle(style2010);
        } else if (slider.value == 2011){
          geojson.setStyle(style2011);
        } else if (slider.value == 2012){
          geojson.setStyle(style2012);
        } else if (slider.value == 2013){
          geojson.setStyle(style2013);
        } else if (slider.value == 2014){
          geojson.setStyle(style2014);
        } else if (slider.value == 2015){
          geojson.setStyle(style2015);
        } else if (slider.value == 2016){
          geojson.setStyle(style2016);
        }
    	}

  	  //Creating map
      var mymap = L.map('mapid', {zoomControl:true, maxZoom: 12, minZoom: 5}).setView([51.5167, 9.9167], 5);
      mymap.zoomControl.setPosition('bottomleft');
      mymap.setMaxBounds([
        [40,-5],
        [60,25]
      ]);

      //Adding a tile layer from OSM
      L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 14,
        attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a>, Contributor of state data: <a href="https://github.com/isellsoap">Francesco Schwarz</a>',
      }).addTo(mymap);

      function style2006(feature) {
        return {
          weight: 1,
          opacity: 1,
          color: "black",
          dashArray: '0',
          fillOpacity: 0.7,
          fillColor: getColor(feature.properties.unemp2006)
        };
      }
      function style2007(feature) {
        return {
          weight: 1,
          opacity: 1,
          color: "black",
          dashArray: '0',
          fillOpacity: 0.7,
          fillColor: getColor(feature.properties.unemp2007)
        };
      }
      function style2008(feature) {
        return {
          weight: 1,
          opacity: 1,
          color: "black",
          dashArray: '0',
          fillOpacity: 0.7,
          fillColor: getColor(feature.properties.unemp2008)
        };
      }
      function style2009(feature) {
        return {
          weight: 1,
          opacity: 1,
          color: "black",
          dashArray: '0',
          fillOpacity: 0.7,
          fillColor: getColor(feature.properties.unemp2009)
        };
      }
      function style2010(feature) {
        return {
          weight: 1,
          opacity: 1,
          color: "black",
          dashArray: '0',
          fillOpacity: 0.7,
          fillColor: getColor(feature.properties.unemp2010)
        };
      }
      function style2011(feature) {
        return {
          weight: 1,
          opacity: 1,
          color: "black",
          dashArray: '0',
          fillOpacity: 0.7,
          fillColor: getColor(feature.properties.unemp2011)
        };
      }
      function style2012(feature) {
        return {
          weight: 1,
          opacity: 1,
          color: "black",
          dashArray: '0',
          fillOpacity: 0.7,
          fillColor: getColor(feature.properties.unemp2012)
        };
      }
      function style2013(feature) {
        return {
          weight: 1,
          opacity: 1,
          color: "black",
          dashArray: '0',
          fillOpacity: 0.7,
          fillColor: getColor(feature.properties.unemp2013)
        };
      }
      function style2014(feature) {
        return {
          weight: 1,
          opacity: 1,
          color: "black",
          dashArray: '0',
          fillOpacity: 0.7,
          fillColor: getColor(feature.properties.unemp2014)
        };
      }
      function style2015(feature) {
        return {
          weight: 1,
          opacity: 1,
          color: "black",
          dashArray: '0',
          fillOpacity: 0.7,
          fillColor: getColor(feature.properties.unemp2015)
        };
      }
      function style2016(feature) {
        return {
          weight: 1,
          opacity: 1,
          color: "black",
          dashArray: '0',
          fillOpacity: 0.7,
          fillColor: getColor(feature.properties.unemp2016)
        };
      }

      function getColor(d) {
          return d > 325 ? '#800026' :
                 d > 275  ? '#BD0026' :
                 d > 225  ? '#E31A1C' :
                 d > 175  ? '#FC4E2A' :
                 d > 125   ? '#FD8D3C' :
                 d > 75   ? '#FEB24C' :
                 d > 25   ? '#FED976' :
                            'black';
      }

      var legend = L.control({position: 'bottomright'});

      legend.onAdd = function (mymap) {
        var div = L.DomUtil.create('div', 'info legend'),
        grades = [25, 75, 125, 175, 225, 275, 325],
        labels = [];
        div.innerHTML = "Unemployed in <br> thousand <br>"
            for (var i = 0; i < grades.length; i++) {
                div.innerHTML +=
                    '<i style="background:' + getColor(grades[i] + 1) + '"></i> ' +
                    grades[i] + (grades[i + 1] ? '&ndash;' + grades[i + 1] + '<br>' : '+');
            }
            return div;
      };
      legend.addTo(mymap);

      function onEachFeature(feature, layer) {
        layer.on({
          click: function(e){
            mymap.fitBounds(e.target.getBounds());
            stateName = feature.properties.NAME_1;
            document.getElementById("getStateName").innerHTML = "Selected federal state:" + "<br/>" + stateName;
            createDiagrams();
            console.log(feature.properties);
          }
        });
      }

      function getGDP(){
        var qry = "select * from <http://course.geoinfo2017.org/GC> where { "+
          "<http://course.geoinfo2017.org/GC#" + stateName + "> <http://course.geoinfo2017.org/GC#hasGDP2008> ?c."+
          "<http://course.geoinfo2017.org/GC#" + stateName + "> <http://course.geoinfo2017.org/GC#hasGDP2009> ?c1."+
          "<http://course.geoinfo2017.org/GC#" + stateName + "> <http://course.geoinfo2017.org/GC#hasGDP2010> ?c2."+
          "<http://course.geoinfo2017.org/GC#" + stateName + "> <http://course.geoinfo2017.org/GC#hasGDP2011> ?c3."+
          "<http://course.geoinfo2017.org/GC#" + stateName + "> <http://course.geoinfo2017.org/GC#hasGDP2012> ?c4."+
          "<http://course.geoinfo2017.org/GC#" + stateName + "> <http://course.geoinfo2017.org/GC#hasGDP2013> ?c5."+
          "<http://course.geoinfo2017.org/GC#" + stateName + "> <http://course.geoinfo2017.org/GC#hasGDP2014> ?c6.}";
        $.post("http://giv-oct2.uni-muenster.de:8890/sparql", {
          query: qry,
          output: 'json'
        },
        function(data){
          createGDPDiagram(data);
        });
      }

      function getROP(){
        var qry = "select * from <http://course.geoinfo2017.org/GC> where { "+
          "<http://course.geoinfo2017.org/GC#" + stateName + "> <http://course.geoinfo2017.org/GC#hasPoverty2008> ?c."+
          "<http://course.geoinfo2017.org/GC#" + stateName + "> <http://course.geoinfo2017.org/GC#hasPoverty2009> ?c1."+
          "<http://course.geoinfo2017.org/GC#" + stateName + "> <http://course.geoinfo2017.org/GC#hasPoverty2010> ?c2."+
          "<http://course.geoinfo2017.org/GC#" + stateName + "> <http://course.geoinfo2017.org/GC#hasPoverty2011> ?c3."+
          "<http://course.geoinfo2017.org/GC#" + stateName + "> <http://course.geoinfo2017.org/GC#hasPoverty2012> ?c4."+
          "<http://course.geoinfo2017.org/GC#" + stateName + "> <http://course.geoinfo2017.org/GC#hasPoverty2013> ?c5."+
          "<http://course.geoinfo2017.org/GC#" + stateName + "> <http://course.geoinfo2017.org/GC#hasPoverty2014> ?c6.}";
        $.post("http://giv-oct2.uni-muenster.de:8890/sparql", {
          query: qry,
          output: 'json'
        },
        function(data){
          createROPDiagram(data);
        });
      }

      function getPopdens(){
        var qry = "select * from <http://course.geoinfo2017.org/GC> where { "+
          "<http://course.geoinfo2017.org/GC#" + stateName + "> <http://course.geoinfo2017.org/GC#hasPopulationDensity2008> ?c."+
          "<http://course.geoinfo2017.org/GC#" + stateName + "> <http://course.geoinfo2017.org/GC#hasPopulationDensity2009> ?c1."+
          "<http://course.geoinfo2017.org/GC#" + stateName + "> <http://course.geoinfo2017.org/GC#hasPopulationDensity2010> ?c2."+
          "<http://course.geoinfo2017.org/GC#" + stateName + "> <http://course.geoinfo2017.org/GC#hasPopulationDensity2011> ?c3."+
          "<http://course.geoinfo2017.org/GC#" + stateName + "> <http://course.geoinfo2017.org/GC#hasPopulationDensity2012> ?c4."+
          "<http://course.geoinfo2017.org/GC#" + stateName + "> <http://course.geoinfo2017.org/GC#hasPopulationDensity2013> ?c5."+
          "<http://course.geoinfo2017.org/GC#" + stateName + "> <http://course.geoinfo2017.org/GC#hasPopulationDensity2014> ?c6.}";
        $.post("http://giv-oct2.uni-muenster.de:8890/sparql", {
          query: qry,
          output: 'json'
        },
        function(data){
          createPDDiagram(data);
        });
      }

      function getNumberOfIndustries(){
        var qry = "select * from <http://course.geoinfo2017.org/GC> where {"+
          "<http://course.geoinfo2017.org/GC#" + stateName + "> <http://course.geoinfo2017.org/GC#NumIndustries2008> ?c."+
          "<http://course.geoinfo2017.org/GC#" + stateName + "> <http://course.geoinfo2017.org/GC#NumIndustries2009> ?c1."+
          "<http://course.geoinfo2017.org/GC#" + stateName + "> <http://course.geoinfo2017.org/GC#NumIndustries2010> ?c2."+
          "<http://course.geoinfo2017.org/GC#" + stateName + "> <http://course.geoinfo2017.org/GC#NumIndustries2011> ?c3."+
          "<http://course.geoinfo2017.org/GC#" + stateName + "> <http://course.geoinfo2017.org/GC#NumIndustries2012> ?c4."+
          "<http://course.geoinfo2017.org/GC#" + stateName + "> <http://course.geoinfo2017.org/GC#NumIndustries2013> ?c5."+
          "<http://course.geoinfo2017.org/GC#" + stateName + "> <http://course.geoinfo2017.org/GC#NumIndustries2014> ?c6.}";
        $.post("http://giv-oct2.uni-muenster.de:8890/sparql", {
          query: qry,
          output: 'json'
        },
        function(data){
          createNUIDiagram(data);
        });
      }

      function getData(){
        var qry = "SELECT distinct ?unemp1 ?unemp2006 ?unemp2007 ?unemp2008 ?unemp2009 ?unemp2010 ?unemp2011 ?unemp2012 ?unemp2013 ?unemp2014 ?unemp2015 ?unemp2016 "+
          "from <http://course.geoinfo2017.org/GC>"+
          "WHERE {"+
          "?unemp1 <http://course.geoinfo2017.org/GC#hasUnemployment2006> ?unemp2006."+
          "?unemp1 <http://course.geoinfo2017.org/GC#hasUnemployment2007> ?unemp2007."+
          "?unemp1 <http://course.geoinfo2017.org/GC#hasUnemployment2008> ?unemp2008."+
          "?unemp1 <http://course.geoinfo2017.org/GC#hasUnemployment2009> ?unemp2009."+
          "?unemp1 <http://course.geoinfo2017.org/GC#hasUnemployment2010> ?unemp2010."+
          "?unemp1 <http://course.geoinfo2017.org/GC#hasUnemployment2011> ?unemp2011."+
          "?unemp1 <http://course.geoinfo2017.org/GC#hasUnemployment2012> ?unemp2012."+
          "?unemp1 <http://course.geoinfo2017.org/GC#hasUnemployment2013> ?unemp2013."+
          "?unemp1 <http://course.geoinfo2017.org/GC#hasUnemployment2014> ?unemp2014."+
          "?unemp1 <http://course.geoinfo2017.org/GC#hasUnemployment2015> ?unemp2015."+
          "?unemp1 <http://course.geoinfo2017.org/GC#hasUnemployment2016> ?unemp2016.}";
        $.post("http://giv-oct2.uni-muenster.de:8890/sparql", {
          query: qry,
          output: 'json'
        },
        function(data){
          //var wkt;
          for (var i in data.results.bindings){
            // wkt = data.results.bindings[i].geom.value
            // wkt = data.results.bindings[i].geom.value;
  				  // wkt = wkt.replace(/\)\),\(\(/g, "),(");
            // wkt = wkt.replace("(","");
            // wkt = wkt.substring(0, wkt.length-1);
            // console.log('result in true' + JSON.stringify(wkt));

            var sname = data.results.bindings[i].unemp1.value;
            var hashtag = sname.indexOf("#");
            sname = sname.substring(hashtag+1, sname.length);
            ame[i] = sname;
            unemp2006[i] = parseInt(data.results.bindings[i].unemp2006.value);
            unemp2007[i] = parseInt(data.results.bindings[i].unemp2007.value);
            unemp2008[i] = parseInt(data.results.bindings[i].unemp2008.value);
            unemp2009[i] = parseInt(data.results.bindings[i].unemp2009.value);
            unemp2010[i] = parseInt(data.results.bindings[i].unemp2010.value);
            unemp2011[i] = parseInt(data.results.bindings[i].unemp2011.value);
            unemp2012[i] = parseInt(data.results.bindings[i].unemp2012.value);
            unemp2013[i] = parseInt(data.results.bindings[i].unemp2013.value);
            unemp2014[i] = parseInt(data.results.bindings[i].unemp2014.value);
            unemp2015[i] = parseInt(data.results.bindings[i].unemp2015.value);
            unemp2016[i] = parseInt(data.results.bindings[i].unemp2016.value);
          }
          if (geojson) mymap.removeLayer(geojson);

          geoJsonFeatureCollection = {
            "type": "FeatureCollection",
            "features": []
          };

          // var geoPar = Terraformer.WKT.parse(wkt);
          // geoPar.coordinates = JSON.stringify(geoPar.coordinates);
          // geoPar.coordinates = geoPar.coordinates.replace(/\]\],\[\[/g,"],[");
          // console.log('after removing []s' + geoPar.coordinates);
          // geoPar.coordinates = JSON.parse(geoPar.coordinates);
          // gJ.geometry = geoPar;

          for (var i in statesData.features){
            gJ = {
              "type": "Feature",
              "id": "",
              "properties": {},
              "geometry": {}
            };

            for (var t in unemp2010){
              if (statesData.features[i].properties.NAME_1 == ame[t]){
                gJ.geometry = statesData.features[i].geometry;
                gJ.properties = statesData.features[i].properties;

                gJ.properties.unemp2006 = unemp2006[t];
                gJ.properties.unemp2007 = unemp2007[t];
                gJ.properties.unemp2008 = unemp2008[t];
                gJ.properties.unemp2009 = unemp2009[t];
                gJ.properties.unemp2010 = unemp2010[t];
                gJ.properties.unemp2011 = unemp2011[t];
                gJ.properties.unemp2012 = unemp2012[t];
                gJ.properties.unemp2013 = unemp2013[t];
                gJ.properties.unemp2014 = unemp2014[t];
                gJ.properties.unemp2015 = unemp2015[t];
                gJ.properties.unemp2016 = unemp2016[t];

                gJ.properties.sname = ame[t];
              }
            }
            geoJsonFeatureCollection.features.push(gJ);
          }

          geojson = L.geoJson(geoJsonFeatureCollection, {
            style: style2014,
            onEachFeature: onEachFeature
          }).addTo(mymap);
        });
      }

      function createDiagrams(){
        if(document.getElementById("parameter").value == "gdp"){
          getGDP();
        }
        if(document.getElementById("parameter").value == "popdens"){
          getPopdens();
        }
        if(document.getElementById("parameter").value == "numofindustries"){
          getNumberOfIndustries();
        }
        if(document.getElementById("parameter").value == "riskofpoverty"){
          getROP();
        }
      }

      function createGDPDiagram(data){
        var gdpdata = [];
        var gdpyear = [];

        gdpdata[0] = parseFloat(data.results.bindings[0].c.value);
        gdpdata[1] = parseFloat(data.results.bindings[0].c1.value);
        gdpdata[2] = parseFloat(data.results.bindings[0].c2.value);
        gdpdata[3] = parseFloat(data.results.bindings[0].c3.value);
        gdpdata[4] = parseFloat(data.results.bindings[0].c4.value);
        gdpdata[5] = parseFloat(data.results.bindings[0].c5.value);
        gdpdata[6] = parseFloat(data.results.bindings[0].c6.value);

        var chart = new CanvasJS.Chart("chartContainer", {
        	animationEnabled: true,
        	theme: "light1",
        	title:{
        		text: "GDP per Capita",
            fontFamily: "tahoma",
        	},
        	axisY: {
        		title: "GDP in â‚¬"
        	},
        	data: [{
        		type: "column",
        		showInLegend: false,
            color: "blue",
        		dataPoints: [
              { y: gdpdata[0],  label: "2008" },
              { y: gdpdata[1],  label: "2009" },
              { y: gdpdata[2],  label: "2010" },
              { y: gdpdata[3],  label: "2011" },
              { y: gdpdata[4],  label: "2012" },
              { y: gdpdata[5],  label: "2013" },
              { y: gdpdata[6],  label: "2014" },
        		]
        	}]
        });
        chart.render();
      }

      function createNUIDiagram(data){
        var noidata = [];
        var gdpyear = [];

        noidata[0] = parseInt(data.results.bindings[0].c.value);
        noidata[1] = parseInt(data.results.bindings[0].c1.value);
        noidata[2] = parseInt(data.results.bindings[0].c2.value);
        noidata[3] = parseInt(data.results.bindings[0].c3.value);
        noidata[4] = parseInt(data.results.bindings[0].c4.value);
        noidata[5] = parseInt(data.results.bindings[0].c5.value);
        noidata[6] = parseInt(data.results.bindings[0].c6.value);

        var chart = new CanvasJS.Chart("chartContainer", {
          animationEnabled: true,
          theme: "light1",
          title:{
            text: "Number of Industries",
            fontFamily: "tahoma",
          },
          axisY: {
            title: "Number of Industries"
          },
          data: [{
            type: "column",
            color: "black",
            showInLegend: false,
            // legendMarkerColor: "grey",
            // legendText: "MMbbl = one million barrels",
            dataPoints: [
              { y: noidata[0],  label: "2008" },
              { y: noidata[1],  label: "2009" },
              { y: noidata[2],  label: "2010" },
              { y: noidata[3],  label: "2011" },
              { y: noidata[4],  label: "2012" },
              { y: noidata[5],  label: "2013" },
              { y: noidata[6],  label: "2014" },
            ]
          }]
        });
      chart.render();
      }

      function createROPDiagram(data){
        var ropdata = [];
        var gdpyear = [];

        ropdata[0] = parseFloat(data.results.bindings[0].c.value);
        ropdata[1] = parseFloat(data.results.bindings[0].c1.value);
        ropdata[2] = parseFloat(data.results.bindings[0].c2.value);
        ropdata[3] = parseFloat(data.results.bindings[0].c3.value);
        ropdata[4] = parseFloat(data.results.bindings[0].c4.value);
        ropdata[5] = parseFloat(data.results.bindings[0].c5.value);
        ropdata[6] = parseFloat(data.results.bindings[0].c6.value);

        var chart = new CanvasJS.Chart("chartContainer", {
          animationEnabled: true,
          theme: "light1",
          title:{
            text: "Risk of Poverty",
            fontFamily: "tahoma",
          },
          axisY: {
            title: "Poverty rate in %"
          },
          data: [{
            type: "column",
            color: "darkred",
            showInLegend: false,
            // legendMarkerColor: "grey",
            // legendText: "MMbbl = one million barrels",
            dataPoints: [
              { y: ropdata[0],  label: "2008" },
              { y: ropdata[1],  label: "2009" },
              { y: ropdata[2],  label: "2010" },
              { y: ropdata[3],  label: "2011" },
              { y: ropdata[4],  label: "2012" },
              { y: ropdata[5],  label: "2013" },
              { y: ropdata[6],  label: "2014" },
            ]
          }]
        });
      chart.render();
      }

      function createPDDiagram(data){
        var pddata = [];
        var gdpyear = [];

        pddata[0] = parseInt(data.results.bindings[0].c.value);
        pddata[1] = parseInt(data.results.bindings[0].c1.value);
        pddata[2] = parseInt(data.results.bindings[0].c2.value);
        pddata[3] = parseInt(data.results.bindings[0].c3.value);
        pddata[4] = parseInt(data.results.bindings[0].c4.value);
        pddata[5] = parseInt(data.results.bindings[0].c5.value);
        pddata[6] = parseInt(data.results.bindings[0].c6.value);

        var chart = new CanvasJS.Chart("chartContainer", {
          animationEnabled: true,
          theme: "light1",
          title:{
            text: "Population density",
            fontFamily: "tahoma",
          },
          axisY: {
            title: "Population density per kmÂ²",
          // interval: 50
          },
          data: [{
            type: "column",
            color: "gray",
            showInLegend: false,
            // legendMarkerColor: "grey",
            // legendText: "MMbbl = one million barrels",
            dataPoints: [
              { y: pddata[0],  label: "2008" },
              { y: pddata[1],  label: "2009" },
              { y: pddata[2],  label: "2010" },
              { y: pddata[3],  label: "2011" },
              { y: pddata[4],  label: "2012" },
              { y: pddata[5],  label: "2013" },
              { y: pddata[6],  label: "2014" },
            ]
        }]
        });
        chart.render();
      }

      getData();

      </script>

    </body>

</html>
